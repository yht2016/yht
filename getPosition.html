<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Document</title>
</head>

<body>
    <div id="map_canvas"></div>
    <div id="allmap"></div>
    <script type="text/javascript" src="http://api.map.baidu.com/api?v=2.0&ak=您的密钥"></script>
    <script>
    var point = {
        x: 0,
        y: 0
    }

    function getElem(id) {
        return typeof id === 'string' ? document.getElementById(id) : id;
    }

    function show_it(lat, lon) {
        var str = '您当前的位置，纬度：' + lat + '，经度：' + lon;
        getElem('geoloc').innerHTML = str;
        point.x = lat;
        point.y = lon;
    }

    if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(function(position) {
            show_it(position.coords.latitude, position.coords.longitude);
        }, function(err) {
            getElem('geo_loc').innerHTML = err.code + "\n" + err.message;
        });
    } else {
        getElem('geo_loc').innerHTML = "您当前使用的浏览器不支持Geolocation服务";
    }
    var map = new BMap.Map("allmap"); // 创建Map实例
    map.centerAndZoom(new BMap.Point(point.x, point.y), 11); // 初始化地图,设置中心点坐标和地图级别
    map.addControl(new BMap.MapTypeControl()); //添加地图类型控件
    map.setCurrentCity("福建"); // 设置地图显示的城市 此项是必须设置的
    map.enableScrollWheelZoom(true); //开启鼠标滚轮缩放
    </script>
    <!--  <script>
    function getElem(id) {
        return typeof id === 'string' ? document.getElementById(id) : id;
    }

    function success(position) {
        var mapcanvas = document.createElement('div');
        mapcanvas.id = 'mapcanvas';
        mapcanvas.style.height = '400px';
        mapcanvas.style.width = '560px';

        getElem("map_canvas").appendChild(mapcanvas);

        var latlng = new google.maps.LatLng(data.coords.latitude, data.coords.longitude);
        var myOptions = {
            zoom: 15,
            center: latlng,
            mapTypeControl: false,
            navigationControlOptions: {
                style: google.maps.NavigationControlStyle.SMALL
            },
            mapTypeId: google.maps.MapTypeId.ROADMAP
        };
        var map = new google.maps.Map(document.getElementById("mapcanvas"), myOptions);
        var marker = new google.maps.Marker({
            position: latlng,
            map: map,
            title: "你在这里！"
        });
    }

    if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(success);
    }
    </script> -->
</body>

</html>
